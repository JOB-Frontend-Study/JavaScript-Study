# 13. 스코프

## 스코프(Scope)
- 식별자가 유효한 범위
- 모든 식별자는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위(스코프)가 결정된다.
- 동명의 변수가 있고 이를 참조하려 할 때, 스코프를 고려해 참조할 변수를 결정한다.
- 식별자를 검색할 때 사용하는 규칙이다.
- 스코프 내에서 식별자는 유일해야 하지만 다른 스코프에는 같은 이름의 식별자를 사용할 수 있다.(Name Space)

<br>

## 스코프의 종류
<table>
        <thead>
            <tr>
                <td>구분</td>
              <td><b>전역(global)</b></td>
              <td><b>지역(local)</b></td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>설명</td>
                <td>코드의 가장 바깥 영역</td>
                <td>함수 몸체 내부</td>
            </tr>
            <tr>
                <td>스코프</td>
                <td>코드의 가장 바깥 영역(전역 스코프). <br>
                어디서든지 유효</td>
                <td>선언된 함수 몸체 내부(지역 스코프). <br>
                자신과 자신의 하위 지역 스코프에서 유효</td>
            </tr>
            <tr>
                <td>변수</td>
                <td>전역 변수</td>
                <td>지역 변수</td>
            </tr>
        </tbody>
    </table>


<br>

 ## 스코프 체인
 - 함수는 중첩될 수 있으므로 지역 스코프도 중첩될 수 있다. => **스코프가 함수의 중첩에 의해 계층적 구조를 갖는다.**
 - 스코프가 계층적으로 연결된 것.
 - 탐색 순서 : 변수 참조 스코프에서 시작 -> 상위 스코프 -> ... -> 최상위 스코프(전역 스코프)

> ### 렉시컬 환경
> 스코프 체인은 컨텍스트의 렉시컬 환경을 단방향으로 연결한 것이다. <br>
> 전역 렉시컬 환경은 코드가 로드되면 곧바로 생성되고 함수의 렉시컬 환경은 함수가 호출된면 곧바로 생성된다.

<br>

## 함수 레벨 스코프
- 함수의 코드 블록(함수 몸체)만들 지역 스코프로 인정하는 특성.
- var 키워드의 변수가 이에 해당

<br>

## 렉시컬 스코프(=정적 스코프)
- 함수를 어디서 정의했는지에 따라 함수의 상위 스코프를 결정한다.
- 자바스크립트는 렉시컬 스코프로, 함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다.

> ### 동적 스코프
> 함수 호출 시점에서 동적으로 상위 스코프를 결정한다.

<br>

# 14. 전역 변수의 문제점
- 전역변수의 생명 주기는 애플리케이션의 생명 주기와 같다. 이러한 특징은 아래와 같은 문제를 유발한다.


## 전역 변수의 문제점

1. 암묵적 결합 : 모든 코드가 전역 변수를 참조하고 변경할 수 있게 허용함
3. 긴 생명주기 : 메모리 리소스도 오랜 기간 소비, 변경 가능한 기간이 길어지므로 실수 유발 ↑
4. 스코프 체인 상에서 종점에 존재 : 전역 변수의 검색 속도가 가장 느림
5. 네임스페이스 오염 : 파일이 분리되어도 공유되어 실수 확륲 ↑

<br>

## 전역 변수 사용 억제 방법
- 꼭 필요한 경우가 아니면 지역변수를 사용한다.
    - 변수의 스코프는 좁을수록 좋다.
    - 아래의 방법들을 이용해볼 수 있다.
        - 즉시 실행 함수 : 모든 코드를 즉시 실행함수로 감싸면 모든 변수는 즉시 실행 함수의 지역변수가 됨
        - 네임스페이스 객체 : 네임스페이스 객체로 변수 프로퍼티를 추가 및 이용
        - 모듈 패턴 : 클로저를 통한 전역 변수 억제
        - ES6 모듈 : type="module"을 하면 var 키워드로 선언한 변수가 더 이상 전역변수가 아님

<br>

# 15. let.const 키워드와 블록 레벨 스코프
## var 키워드의 특징
- 변수 중복 선언 허용
- 함수 레벨 스코프
- 변수 호이스팅
- 
<br>

## let 키워드
- 변수 중복 선언 금지
- 블록 레벨 스코프
- 변수 호이스팅 -> Temporal Dead Zone
- 
<br>

## const 키워드
- 선언과 초기화
- 재할당 금지
